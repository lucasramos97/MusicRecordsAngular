<div class="user">
  <span class="user-name">{{ username }}</span>
  <span>{{ email }}</span>
</div>

<h1>Music List</h1>

<div class="table-top-buttons">
  <p-button label="Add" (click)="openAdd()" class="p-button-primary" icon="pi pi-plus">
  </p-button>
  <p-button *ngIf="countDeletedMusics > 0" label="Deleted Music List" [badge]="countDeletedMusics.toString()"
    badgeClass="p-badge-danger" styleClass="p-button-primary" icon="pi pi-trash">
  </p-button>
</div>

<p-table [value]="musics" [lazy]="true" (onLazyLoad)="loadMusics($event)" responsiveLayout="scroll" [paginator]="true"
  [rows]="5" [totalRecords]="totalRecords" [loading]="loading" [showCurrentPageReport]="true"
  currentPageReportTemplate="Showing {first} to {last} of {totalRecords} musics">
  <ng-template pTemplate="header">
    <tr>
      <th>Title</th>
      <th>Artist</th>
      <th>Release Date</th>
      <th>Duration</th>
      <th>Number Views</th>
      <th>Feat</th>
      <th>Edit</th>
      <th>Delete</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-music>
    <tr>
      <td>{{ music.title }}</td>
      <td>{{ music.artist }}</td>
      <td>{{ music.release_date | date:"dd/MM/yyyy" }}</td>
      <td>{{ music.duration | duration }}</td>
      <td>{{ music.number_views | number }}</td>
      <td>{{ music.feat | feat }}</td>
      <td>
        <button pButton pRipple (click)="openEdit(music)" pTooltip="Edit Music"
          class="p-button-rounded p-button-primary" icon="pi pi-pencil">
        </button>
      </td>
      <td>
        <button pButton pRipple (click)="openDelete(music)" pTooltip="Delete Music"
          class="p-button-rounded p-button-danger" icon="pi pi-trash">
        </button>
      </td>
    </tr>
  </ng-template>
</p-table>

<p-dialog [header]="titleMusicDialog" [(visible)]="musicDialog" [modal]="true" [style]="{width: '500px'}">
  <app-music-dialog [music]="music" (onSuccess)="onMusicDialogSuccess()"></app-music-dialog>
</p-dialog>

<p-dialog header="Delete Music" [(visible)]="deleteMusicDialog" [modal]="true" [style]="{width: '500px'}">
  <app-delete-music [music]="deleteMusic" (onSuccess)="onDeleteMusicSuccess()"></app-delete-music>
</p-dialog>

<p-dialog header="Info" [(visible)]="sessionExpiredDialog" (onHide)="onHideSessionExpiredDialog()" [modal]="true"
  [style]="{width: '450px'}">
  <app-session-expired></app-session-expired>
</p-dialog>